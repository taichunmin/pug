<!doctype html><html><head><meta charset="UTF-8"><meta content="IE=edge" http-equiv="X-UA-Compatible"><meta content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,viewport-fit=cover,user-scalable=no" name="viewport"><title>猜數字 Bulls And Cows</title><script src="https://www.googletagmanager.com/gtag/js?id=UA-39556213-3" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-39556213-3");</script><link href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet"><style>[v-cloak]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,body,h1,h2,h3,h4,h5,h6{font-family:"Noto Sans TC",sans-serif}</style></head><body><div class="container" id="app" v-cloak><h3 class="text-center my-3">猜數字 Bulls And Cows</h3><div class="row"><div class="col-sm"><div class="card mb-3"><h5 class="card-header"><i class="fa fa-fw fa-gamepad"></i> 猜數字遊戲</h5><div class="card-body"><div class="form-group"><label for="i-guess">請輸入四位數不重複 0 到 9 的數字</label><div class="input-group input-group-sm mb-2"><div class="input-group-prepend"><span class="input-group-text">{{ i.guesses.length + 1 }}</span></div><input class="form-control" inputmode="numeric" maxlength="4" v-model="i.guess" @keyup.enter="btnPushGuess" id="i-guess"><div class="input-group-append"><button class="btn btn-success" type="button" @click="btnPushGuess">送出</button></div></div></div><table class="mb-0 table table-bordered table-sm text-center" v-if="i.guesses.length"><thead><tr><th>#</th><th>猜測數字</th><th colspan="2">結果</th></tr></thead><tbody class="text-monospace"><tr v-for="(guess, guessId) in i.guesses"><template v-for="simi in [calcSimilarity(guess, i.answer)]"><th>{{ guessId + 1 }}</th><td>{{ guess }}</td><td>{{ similarity.toStr[simi] }}</td><td><a @click="btnPushSolver(guess, simi)" class="badge badge-info mr-1" href="#">求解</a></td></template></tr></tbody></table></div><div class="card-footer text-right"><button class="btn btn-danger btn-sm" type="button" @click="btnNewGame(false)"><span class="fa fa-fw fa-trash-o"></span> 開新遊戲</button></div></div></div><div class="col-sm"><div class="card mb-3"><h5 class="card-header"><i class="fa fa-fw fa-graduation-cap"></i> 猜數字求解程式</h5><div class="card-body"><div class="form-group"><label>請輸入猜測數字與結果</label><div class="input-group input-group-sm mb-2" v-for="(solver, solverId) in i.solvers"><div class="input-group-prepend"><span class="input-group-text">{{ solverId + 1 }}</span></div><input class="form-control" inputmode="numeric" maxlength="4" v-model="solver.guess"><div class="input-group-append"><button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown">{{ similarity.toStr[solver.simi] }}</button><div class="dropdown-menu dropdown-menu-right"><button class="dropdown-item" type="button" @click="solver.simi = simi" :class="{active: simi === solver.simi}" v-for="(simi, simiStr) in similarity.toInt">{{ simiStr }}</button></div></div></div></div><div class="form-group mb-0"><label>可能的謎底 <span class="badge badge-pill badge-success">{{ possibilities.length }}</span></label><small class="form-text text-muted" v-if="!possibilities.length">請輸入猜測數字與結果來顯示可能的謎底</small><small class="form-text text-muted" v-if="possibilities.length > 100">僅顯示前 100 筆可能的謎底</small><div id="possibilities"><a @click="i.guess = possible" class="badge badge-info mr-1" href="#" v-for="possible in _.take(possibilities, 100)">{{ possible }}</a></div></div></div><div class="card-footer text-right"><button class="btn btn-danger btn-sm" type="button" @click="btnNewSolver(false)"><span class="fa fa-fw fa-trash-o"></span> 重新求解</button></div></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/json5@2/dist/index.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/lodash@4/lodash.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/papaparse@5/papaparse.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/popper.js@1/dist/umd/popper.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-core.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/prismjs@1/plugins/autoloader/prism-autoloader.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/qs@6/dist/qs.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/sweetalert2@11" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" crossorigin="anonymous"></script><script>const SIMILARITY={"0A0B":0,"0A1B":1,"0A2B":2,"0A3B":3,"0A4B":4,"1A0B":10,"1A1B":11,"1A2B":12,"1A3B":13,"2A0B":20,"2A1B":21,"2A2B":22,"3A0B":30,"4A0B":40},vm=new Vue({el:"#app",data:{i:{answer:"",guess:"",guesses:[],solvers:[]},similarity:{toInt:SIMILARITY,toStr:_.invert(SIMILARITY)}},mounted(){try{var s=JSON5.parse(localStorage.getItem(location.pathname));s&&this.$set(this,"i",{...this.i,...s})}catch(s){}this.$watch("i",()=>{localStorage.setItem(location.pathname,JSON5.stringify(this.i))},{deep:!0}),this.verifyGuess(this.i.answer)||this.btnNewGame(!0),this.i.solvers.length||this.btnNewSolver(!0)},computed:{possibilities(){var n=_.filter(this.i.solvers,s=>this.verifyGuess(s.guess)&&_.hasIn(this.similarity.toStr,s.simi));if(!n.length)return[];const o=[];for(let r=0;r<10;r++)for(let e=0;e<10;e++)if(r!==e)for(let i=0;i<10;i++)if(i!==r&&i!==e)for(let t=0;t<10;t++)if(t!==r&&t!==e&&t!==i){let s=!0;var a=""+r+e+i+t;for(const l of n)s&&this.calcSimilarity(a,l.guess)!==l.simi&&(s=!1);s&&o.push(a)}return o}},methods:{verifyGuess(i){if(!_.isString(i)||!/^\d{4}$/.test(i))return!1;for(let t=0;t<4;t++)for(let s=t+1;s<4;s++)if(i[t]===i[s])return!1;return!0},calcSimilarity(i,e){let r=0;for(let t=0;t<4;t++)for(let s=0;s<4;s++)i[t]===e[s]&&(r+=t===s?10:1);return r},btnPushGuess(){var s=this.i.guess;this.verifyGuess(s)&&!_.includes(this.i.guesses,s)&&(this.i.guesses.push(s),this.i.guess="")},async btnNewGame(s=!1){(s||await this.confirm("是否開始新的猜數字遊戲？"))&&(this.i.answer=_.sampleSize("0123456789",4).join(""),this.i.guess="",this.i.guesses=[])},async btnNewSolver(s=!1){(s||await this.confirm("是否清空求解資料？"))&&this.$set(this.i,"solvers",_.times(8,s=>({guess:"",simi:0})))},async btnPushSolver(s,t){const i=_.find(this.i.solvers,s=>!this.verifyGuess(s.guess));i&&(i.guess=s,i.simi=t)},async confirm(s,t="是",i="否"){return!!(await Swal.fire({cancelButtonColor:"#3085d6",cancelButtonText:i,confirmButtonColor:"#d33",confirmButtonText:t,icon:"question",showCancelButton:!0,text:s})).value}}});</script></body></html>