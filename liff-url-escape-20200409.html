<!doctype html><html><head><meta charset="UTF-8"><meta content="IE=edge" http-equiv="X-UA-Compatible"><meta content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,viewport-fit=cover,user-scalable=no" name="viewport"><title>LIFF 沒有 escape 的錯誤</title><script src="https://www.googletagmanager.com/gtag/js?id=UA-39556213-3" async></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-39556213-3");</script><link href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet"><style>[v-cloak]{display:none}</style></head><body><div class="my-3 container" id="app" v-cloak><h2 class="my-3 text-center">LIFF 沒有 escape 的錯誤</h2><h4 class="my-3">請將此連結複製到聊天視窗內貼上再打開</h4><div class="my-3 input-group"><input :value="liff" class="form-control" readonly type="url"><div class="input-group-append"><button @click="btnCopy(liff)" class="btn btn-outline-success" type="button">複製</button><a :href="liff" class="btn btn-outline-success">開啟</a></div></div><h4 class="my-3">參數帶入結果 {{ version }}</h4><pre class="my-3"><code class="language-json">{{ code }}</code></pre><button @click="btnLiffInit" class="my-3 btn btn-block btn-outline-primary" type="button">點此執行 liff.init</button><h4 class="my-3">Google Maps 的網址應該要是</h4><pre class="my-3"><code class="language-none">{{ gmap }}</code></pre></div><script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/json5@2/dist/index.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/lodash@4/lodash.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/papaparse@5/papaparse.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/popper.js@1/dist/umd/popper.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-core.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/prismjs@1/plugins/autoloader/prism-autoloader.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/qs@6/dist/qs.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/sweetalert2@11" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/vconsole@3/dist/vconsole.min.js" crossorigin="anonymous"></script><script src="https://static.line-scdn.net/liff/edge/2/sdk.js" crossorigin="anonymous"></script><script>const vConsole=new VConsole,genGoogleMapUrl=(e,a)=>{const t=new URL("https://www.google.com/maps/search/");return t.searchParams.set("api","1"),t.searchParams.set("query",e),a&&t.searchParams.set("query_place_id",a),t.href};window.vm=new Vue({el:"#app",data:{code:"",gmap:genGoogleMapUrl("24.959276,121.419008","ChIJ40_T2-scaDQRF36Y2c_qORY"),liff:"",version:""},async mounted(){this.liff=this.genLiffUrl(this.gmap),this.version=liff.getVersion();var e=this.getSearchParams(location.href,"liff.state");this.code=JSON.stringify({locationSearch:location.search,liffState:e,gmapFromLiffState:this.getSearchParams(new URL(e,"https://localhost"),"u"),gmapFromLocationSearch:this.getSearchParams(location.href,"u")},null,2)},methods:{async btnLiffInit(){await liff.init({liffId:"1654046335-48OjmpAl"})},getSearchParams(e,a){return new URL(e).searchParams.get(a)},genLiffUrl(e){const a=new URL("https://liff.line.me/1654046335-48OjmpAl/");return a.searchParams.set("u",e),a.href},async btnCopy(e,a=null){a=a||document.body;const t=document.createElement("textarea");t.value=e,a.appendChild(t),t.select(),t.setSelectionRange(0,1e6),document.execCommand("copy"),a.removeChild(t),await Swal.fire({icon:"success",title:"複製成功"})}}});</script></body></html>