extends /layout/default

block beforehtml
  - const title = '13 道線索'

block style
  meta(property="fb:app_id", content="2133031763635285")
  meta(property="og:description", content="桌遊「13 道線索」的筆記")
  meta(property="og:image:height", content="640")
  meta(property="og:image:width", content="1280")
  meta(property="og:image", content="https://i.imgur.com/aIXUkSn.png")
  meta(property="og:locale", content="zh_TW")
  meta(property="og:site_name", content="筆記國度")
  meta(property="og:title", content=title)
  meta(property="og:type", content="website")
  meta(property="og:url", content="https://taichunmin.idv.tw/pug/boardgame-13clues.html")
  style
    :sass
      [v-cloak]
        display: none
      body, .h1, .h2, .h3, .h4, .h5, .h6, h1, h2, h3, h4, h5, h6
        font-family: 'Noto Sans TC', sans-serif

block content
  #app.my-3.container(v-cloak)
    h2.mb-3.text-center= title

block script
  script.
    const CARD_NAMES = [
      '紫男', '粉男', '紅男', '綠女', '黃女', '藍女', '橘女', '白男', '棕女', '灰男', // 男女性
      '紫內', '粉外', '紅內', '綠外', '黃內', '藍外', '橘內', '白外', '棕內', '灰外', // 室內外
      '紫近', '粉遠', '紅近', '綠近', '黃遠', '藍遠', '橘遠', '白近', '棕遠', '灰遠', // 遠近距
    ]
    window.vm = new Vue({
      el: '#app',
      data: {
        h: {
          page: 'setting',
          players: [],
          secrets: [],
          clues: [],
        },
      },
      async mounted () {
        // 自動儲存功能
        try {
          const saved = JSON5.parse(localStorage.getItem(location.pathname))
          if (saved) this.$set(this, 'h', { ...this.h, ...saved })
        } catch (err) {}
        this.$watch('h', () => {
          localStorage.setItem(location.pathname, JSON5.stringify(this.h))
        }, { deep: true })

        await this.init()
      },
      methods: {
        async init () {},
      },
    })
