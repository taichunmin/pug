extends /layout/default

block beforehtml
  - const title = '換匯計算機'

block style
  meta(property="fb:app_id", content="2133031763635285")
  meta(property="og:description", content="換匯計算機能協助你計算該換多少金額最划算。")
  meta(property="og:locale", content="zh_TW")
  meta(property="og:site_name", content="筆記國度")
  meta(property="og:title", content=title)
  meta(property="og:type", content="website")
  meta(property="og:url", content="https://taichunmin.idv.tw/pug/currency-exchange.html")
  style
    :sass
      [v-cloak]
        display: none
      body, .h1, .h2, .h3, .h4, .h5, .h6, h1, h2, h3, h4, h5, h6
        font-family: 'Noto Sans TC', sans-serif

block content
  #app.my-3.container.text-monospace(v-cloak)
    h3.text-center= title
    .row
      .col-xs-12.col-md: .input-group.input-group-sm
        .input-group-prepend 至少兌換外幣
        input.form-control(type="number", v-model.number="h.source")
      .col-xs-12.col-md: .input-group.input-group-sm
        .input-group-prepend 可多換外幣
        input.form-control(type="number", v-model.number="h.quota")
      .col-xs-12.col-md: .input-group.input-group-sm
        .input-group-prepend 外幣有效位數
        input.form-control(type="number", v-model.number="h.precision1")
      .col-xs-12.col-md: .input-group.input-group-sm
        .input-group-prepend 外幣匯率
        input.form-control(type="number", v-model.number="h.rate")
      .col-xs-12.col-md: .input-group.input-group-sm
        .input-group-prepend 台幣有效位數
        input.form-control(type="number", v-model.number="h.precision2")

block script
  script.
    window.vm = new Vue({
      el: '#app',
      data: {
        h: {
          from: 0,
        },
      },
      async mounted () {
        // 自動儲存功能
        try {
          const saved = JSON5.parse(localStorage.getItem(location.pathname))
          if (saved) this.$set(this, 'h', { ...this.h, ...saved })
        } catch (err) {}
        this.$watch('h', () => {
          localStorage.setItem(location.pathname, JSON5.stringify(this.h))
        }, { deep: true })
      },
      computed: {
        results () {},
      },
    })
