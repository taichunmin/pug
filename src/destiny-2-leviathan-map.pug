extends /layouts/default

block beforehtml
  - var title = '天命 2 利維坦 互動地圖'

block style
  style
    :sass
      [v-cloak]
        display: none
      #map-container
        position: relative
        >img
          width: 100%
        >svg
          position: absolute
          top: 0
          left: 0
          width: 100%
          >polyline
            fill: none
            stroke: red
            stroke-width: 5

block content
  .container#app(v-cloak)
    .row
      .input-group.col-12.col-sm.mt-3
        .input-group-prepend
          .input-group-text 起點
        select.custom-select(v-model.number="startPid")
          option(v-for="pname,pid in places", :key="pid", :value="pid") {{ pname }}
      button.btn.btn-primary.d-none.d-sm-inline-block.mt-3(@click="swapStartEnd") ⇋
      .input-group.col-12.col-sm.mt-3
        .input-group-prepend
          .input-group-text 終點
        select.custom-select(v-model.number="endPid")
          option(v-for="pname,pid in places", :key="pid", :value="pid") {{ pname }}
    #map-container
      //- img(src="https://upload.cc/i1/2019/01/28/BvluS9.jpg")
      //- img(src="https://i.imgur.com/UVt3gMR.jpg")
      img(src="https://i.imgur.com/ZtrlCO1.jpg")
      svg(viewBox="0 0 1401 1526", ref="svg")
        polyline(:points="points")
        text(x="950", y="490", fill="red", transform="rotate(-6, 950, 490)") 1 3
        text(x="950", y="504", fill="red", transform="rotate(-6, 950, 504)") 4 2
        text(x="245", y="490", fill="red") 開關：左上 左下 右下 右上

block script
  script.
    const EDGES = {
      '0-1': '219,1437 454,1312 455,1179 485,1162 525,1178 553,1163 514,1148 556,1123 519,1107 947,891 947,176 994,151 1087,185 1137,160',
      '0-10': '219,1437 454,1312 455,1179 485,1162 525,1178 553,1163 514,1148 556,1123 519,1107 947,891 947,176 994,151 1273,251 1139,324 1116,352 1134,359 1220,314 1243,322 1224,333 1250,344 1250,567 1035,681 1015,683 1008,744',
      '0-11': '219,1437 454,1312 455,1179 485,1162 525,1178 553,1163 514,1148 556,1123 519,1107 947,891 947,176 909,162 969,130 956,125',
      '0-12': '219,1437 454,1312 455,1179 609,1236 623,1229 623,818 635,810 567,783 545,794 513,782 543,765',
      '0-13': '219,1437 454,1312 455,1179 485,1162 525,1178 553,1163 514,1148 556,1123 519,1107 734,999 708,989',
      '0-2': '219,1437 454,1312 455,1179 609,1236 623,1229 623,818 635,810 567,783 554,791 494,856 478,865 584,905 611,890 635,899 692,869 745,890 765,879 821,901 840,889 832,886 843,881 844,555 868,542 890,551 923,533 927,494 998,486',
      '0-3': '219,1437 454,1312 455,1179 485,1162 525,1178 553,1163 514,1148 525,1142 584,1114 667,1072 694,1083 660,1105 660,615 616,638 655,653 678,641 712,619 755,596',
      '0-4': '219,1437 454,1312 455,1179 485,1162 525,1178 553,1163 514,1148 558,1123 519,1107 947,891 947,176 911,161 968,130 950,124 920,139 847,113 802,137 794,134 794,112 707,157 796,190 775,201 820,217 820,437 790,453 754,440 785,422 767,415 810,392 787,383 687,435 620,410',
      '0-5': '219,1437 454,1312 455,1179 485,1162 525,1178 553,1163 514,1148 556,1123 519,1107 519,978 474,1001 430,984 472,961 473,676 381,727 350,715 370,669 347,660',
      '0-6': '219,1437 454,1312 455,1179 609,1236 623,1229 623,818 635,810 566,784 552,792 494,856 478,865 584,905 611,890 635,899 692,869 723,881 807,835',
      '0-7': '219,1437 454,1312 455,1179 485,1162 525,1178 553,1163 514,1148 556,1123 519,1107 947,891 947,176 994,151 1273,251 1139,324 1116,352 1134,359 1220,314 1243,322 1224,333 1250,344 1250,567 1130,633 1204,661',
      '0-8': '219,1437 454,1312 455,1179 485,1162 525,1178 553,1163 514,1148 558,1123 519,1107 947,891 947,176 911,161 968,130 950,124 920,139 847,113 802,137 794,134 794,112 707,157 796,190 775,201 820,217 820,437 790,453 771,446 699,486',
      '0-9': '219,1437 454,1312 455,1179 485,1162 525,1178 553,1163 514,1148 536,1136 661,1183',
      '1-10': '1137,160 1087,185 1273,251 1139,324 1116,352 1134,359 1220,314 1243,322 1224,333 1250,344 1250,567 1035,681 1015,683 1008,744',
      '1-11': '1137,160 1087,185 994,151 947,176 911,161 968,130 956,125',
      '1-12': '1137,160 1087,185 994,151 947,176 947,891 519,1107 556,1123 514,1148 553,1163 525,1178 485,1162 455,1179 609,1236 623,1229 623,818 635,810 567,783 545,794 513,782 543,765',
      '1-13': '1137,160 1087,185 994,151 947,176 947,891 734,999 708,989',
      '1-2': '1137,160 1087,185 1273,251 1139,324 1116,352 1134,359 1220,314 1243,322 1224,333 1250,344 1250,567 939,729 935,758 961,756 959,769 788,787 791,765 840,760 846,712 855,711 854,462 872,461 867,501 997,487',
      '1-3': '1137,160 1087,185 994,151 947,176 911,161 968,130 950,124 920,139 847,113 802,137 794,134 794,112 707,157 796,190 775,201 820,217 820,437 790,453 753,440 604,518 636,529 728,481 759,493 713,519 739,529',
      '1-4': '1137,160 1087,185 994,151 947,176 911,161 968,130 950,124 920,139 847,113 802,137 794,134 794,112 707,157 796,190 775,201 820,217 820,437 790,453 753,440 785,422 767,415 810,392 787,383 687,435 620,410',
      '1-5': '1137,160 1087,185 994,151 947,176 947,891 519,1107 519,978 474,1001 430,984 472,961 473,676 381,727 350,715 370,669 347,660',
      '1-6': '1137,160 1087,185 994,151 947,176 947,891 519,1107 556,1123 514,1148 553,1163 525,1178 485,1162 455,1179 609,1236 623,1229 623,818 635,810 566,784 552,792 494,856 478,865 584,905 611,890 635,899 692,869 723,881 807,835',
      '1-7': '1137,160 1087,185 1273,251 1139,324 1116,352 1134,359 1220,314 1243,322 1224,333 1250,344 1250,567 1130,633 1204,661',
      '1-8': '1137,160 1087,185 994,151 947,176 911,161 968,130 950,124 920,139 847,113 802,137 794,134 794,112 707,157 796,190 775,201 820,217 820,437 790,453 771,446 699,486',
      '1-9': '1137,160 1087,185 994,151 947,176 947,891 519,1107 560,1124 536,1136 661,1183',
      '10-11': '1008,744 1015,683 1035,681 1250,567 1250,344 1224,333 1243,322 1220,314 1134,359 1116,352 1139,324 1273,251 994,151 947,176 911,161 968,130 956,125',
      '10-12': '1008,744 1015,683 1035,681 1250,567 1250,344 1224,333 1243,322 1220,314 1134,359 1116,352 1139,324 1273,251 994,151 947,176 947,891 519,1107 556,1123 514,1148 553,1163 525,1178 485,1162 455,1179 609,1236 623,1229 623,818 635,810 567,783 545,794 513,782 543,765',
      '10-13': '1008,744 1015,683 1035,681 1250,567 1250,344 1224,333 1243,322 1220,314 1134,359 1116,352 1139,324 1273,251 994,151 947,176 947,891 734,999 708,989',
      '11-12': '956,125 969,130 909,162 947,176 947,891 519,1107 556,1123 514,1148 553,1163 525,1178 485,1162 455,1179 609,1236 623,1229 623,818 635,810 567,783 545,794 513,782 543,765',
      '11-13': '956,125 969,130 909,162 947,176 947,891 734,999 708,989',
      '12-13': '543,765 513,782 545,794 567,783 635,810 623,818 623,1229 609,1236 455,1179 485,1162 525,1178 553,1163 514,1148 556,1123 519,1107 734,999 708,989',
      '2-10': '997,487 867,501 872,461 854,462 855,711 846,712 840,760 791,765 788,787 959,769 961,756 935,758 941,713 1012,706 1008,744',
      '2-11': '997,487 867,501 872,461 854,462 855,711 846,712 840,760 791,765 788,787 959,769 961,756 935,758 939,729 1250,567 1250,344 1224,333 1243,322 1220,314 1134,359 1116,352 1139,324 1273,251 994,151 947,176 911,161 968,130 956,125',
      '2-12': '998,486 927,494 923,533 890,551 868,542 844,555 843,881 832,886 840,889 821,901 765,879 745,890 692,869 635,899 611,890 584,905 478,865 494,856 513,782 543,765',
      '2-13': '998,486 927,494 923,533 890,551 868,542 844,555 843,881 832,886 840,889 821,901 765,879 745,890 692,869 635,899 611,890 584,905 478,865 494,856 554,791 567,783 635,810 623,818 623,1229 609,1236 455,1179 485,1162 525,1178 553,1163 514,1148 556,1123 519,1107 734,999 708,989',
      '2-3': '997,487 867,501 872,461 854,462 855,711 846,712 840,760 791,765 788,787 959,769 961,756 935,758 942,691 873,665 901,650',
      '2-4': '997,487 867,501 872,461 854,462 855,711 846,712 840,760 791,765 788,787 959,769 961,756 935,758 939,729 1250,567 1250,344 1224,333 1243,322 1220,314 1134,359 1116,352 1139,324 1273,251 994,151 947,176 911,161 968,130 950,124 920,139 847,113 802,137 794,134 794,112 707,157 796,190 775,201 820,217 820,437 790,453 753,440 785,422 767,415 810,392 787,383 687,435 620,410',
      '2-5': '998,486 927,494 923,533 890,551 868,542 844,555 843,881 832,886 840,889 821,901 765,879 745,890 692,869 635,899 611,890 584,905 478,865 494,856 485,782 439,764 378,797 377,803 285,853 206,823 272,788 323,755 363,734 365,721 350,715 370,669 347,660',
      '2-6': '998,486 927,494 923,533 890,551 868,542 844,555 843,881 832,886 840,889 821,901 765,879 745,890 723,881 807,835',
      '2-7': '997,487 867,501 872,461 854,462 855,711 846,712 840,760 791,765 788,787 959,769 961,756 935,758 939,729 1130,633 1204,661',
      '2-8': '997,487 867,501 872,461 854,462 855,711 846,712 840,760 791,765 788,787 959,769 961,756 935,758 939,729 1250,567 1250,344 1224,333 1243,322 1220,314 1134,359 1116,352 1139,324 1273,251 994,151 947,176 911,161 968,130 950,124 920,139 847,113 802,137 794,134 794,112 707,157 796,190 775,201 820,217 820,437 790,453 771,446 699,486',
      '2-9': '998,486 927,494 923,533 890,551 868,542 844,555 843,881 832,886 840,889 821,901 765,879 745,890 692,869 635,899 611,890 584,905 478,865 494,856 554,791 567,783 635,810 623,818 623,1229 609,1236 455,1179 485,1162 525,1178 553,1163 514,1148 536,1136 661,1183',
      '3-10': '901,650 873,665 942,691 941,713 1012,706 1008,744',
      '3-11': '739,529 713,519 759,493 728,481 636,529 604,518 753,440 790,453 820,437 820,217 775,201 796,190 707,157 794,112 794,134',
      '3-12': '755,596 712,619 678,641 655,653 616,638 660,615 660,1105 694,1083 667,1072 584,1114 525,1142 514,1148 553,1163 525,1178 485,1162 455,1179 609,1236 623,1229 623,818 635,810 567,783 545,794 513,782 543,765',
      '3-13': '755,596 712,619 678,641 655,653 616,638 660,615 660,1105 694,1083 667,1072 584,1114 556,1123 519,1107 734,999 708,989',
      '3-4': '739,529 713,519 759,493 728,481 636,529 604,518 785,422 767,415 810,392 787,383 687,435 620,410',
      '3-5': '755,596 712,619 678,641 655,653 616,638 660,615 660,1105 694,1083 667,1072 584,1114 556,1123 519,1107 519,978 474,1001 430,984 472,961 473,676 381,727 350,715 370,669 347,660',
      '3-6': '755,596 712,619 678,641 655,653 616,638 660,615 660,1105 694,1083 667,1072 584,1114 525,1142 514,1148 553,1163 525,1178 485,1162 455,1179 609,1236 623,1229 623,818 635,810 566,784 552,792 494,856 478,865 584,905 611,890 635,899 692,869 723,881 807,835',
      '3-7': '901,650 873,665 958,697 956,711 1016,704 1018,690 1128,631 1204,661',
      '3-8': '739,529 713,519 759,493 728,481 636,529 604,518 710,461 731,470 699,486',
      '3-9': '755,596 712,619 678,641 655,653 616,638 660,615 660,1105 694,1083 667,1072 584,1114 536,1136 661,1183',
      '4-10': '620,410 687,435 787,383 810,392 767,415 785,422 753,440 790,453 820,437 820,217 775,201 796,190 707,157 794,112 794,134 802,137 847,113 920,139 950,124 968,130 911,161 947,176 994,151 1273,251 1139,324 1116,352 1134,359 1220,314 1243,322 1224,333 1250,344 1250,567 1035,681 1015,683 1008,744',
      '4-11': '620,410 687,435 787,383 810,392 767,415 785,422 753,440 790,453 820,437 820,217 775,201 796,190 707,157 794,112 794,134',
      '4-12': '538,509 587,483 548,468 525,480 525,559 512,567 561,586 333,706 365,721 363,734 323,755 272,788 206,823 285,853 377,803 378,797 439,764 485,782 513,782 543,765',
      '4-13': '620,410 687,435 787,383 810,392 767,415 785,422 753,440 790,453 820,437 820,217 775,201 796,190 707,157 794,112 794,134 802,137 847,113 920,139 950,124 968,130 911,161 947,176 947,891 734,999 708,989',
      '4-5': '538,509 587,483 548,468 525,480 525,559 512,567 561,586 390,677 347,660',
      '4-6': '538,509 587,483 548,468 525,480 525,559 512,567 561,586 333,706 365,721 363,734 323,755 272,788 206,823 285,853 377,803 378,797 439,764 485,782 494,856 478,865 584,905 611,890 635,899 692,869 723,881 807,835',
      '4-7': '620,410 687,435 787,383 810,392 767,415 785,422 753,440 790,453 820,437 820,217 775,201 796,190 707,157 794,112 794,134 802,137 847,113 920,139 950,124 968,130 911,161 947,176 994,151 1273,251 1139,324 1116,352 1134,359 1220,314 1243,322 1224,333 1250,344 1250,567 1130,633 1204,661',
      '4-8': '620,410 687,435 787,383 810,392 767,415 785,422 753,440 771,446 699,486',
      '4-9': '620,410 687,435 787,383 810,392 767,415 785,422 753,440 790,453 820,437 820,217 775,201 796,190 707,157 794,112 794,134 802,137 847,113 920,139 950,124 968,130 911,161 947,176 947,891 519,1107 560,1124 536,1136 661,1183',
      '5-10': '347,660 370,669 350,715 381,727 473,676 472,961 430,984 474,1001 519,978 519,1107 947,891 947,176 994,151 1273,251 1139,324 1116,352 1134,359 1220,314 1243,322 1224,333 1250,344 1250,567 1035,681 1015,683 1008,744',
      '5-11': '347,660 370,669 350,715 381,727 473,676 472,961 430,984 474,1001 519,978 519,1107 947,891 947,176 911,161 968,130 956,125',
      '5-12': '347,660 370,669 350,715 365,721 363,734 323,755 272,788 206,823 285,853 377,803 378,797 439,764 485,782 513,782 543,765',
      '5-13': '347,660 370,669 350,715 381,727 473,676 472,961 430,984 474,1001 519,978 519,1107 734,999 708,989',
      '5-6': '347,660 370,669 350,715 365,721 363,734 323,755 272,788 206,823 285,853 377,803 378,797 439,764 485,782 494,856 478,865 584,905 611,890 635,899 692,869 723,881 807,835',
      '5-7': '347,660 370,669 350,715 381,727 473,676 472,961 430,984 474,1001 519,978 519,1107 947,891 947,176 994,151 1273,251 1139,324 1116,352 1134,359 1220,314 1243,322 1224,333 1250,344 1250,567 1130,633 1204,661',
      '5-8': '347,660 370,669 350,715 381,727 473,676 472,961 430,984 474,1001 519,978 519,1107 947,891 947,176 911,161 968,130 950,124 920,139 847,113 802,137 794,134 794,112 707,157 796,190 775,201 820,217 820,437 790,453 771,446 699,486',
      '5-9': '347,660 370,669 350,715 381,727 473,676 472,961 430,984 474,1001 519,978 519,1107 560,1124 536,1136 661,1183',
      '6-10': '807,835 723,881 692,869 635,899 611,890 584,905 478,865 494,856 552,792 566,784 635,810 623,818 623,1229 609,1236 455,1179 485,1162 525,1178 553,1163 514,1148 556,1123 519,1107 947,891 947,176 994,151 1273,251 1139,324 1116,352 1134,359 1220,314 1243,322 1224,333 1250,344 1250,567 1035,681 1015,683 1008,744',
      '6-11': '807,835 723,881 692,869 635,899 611,890 584,905 478,865 494,856 552,792 566,784 635,810 623,818 623,1229 609,1236 455,1179 485,1162 525,1178 553,1163 514,1148 556,1123 519,1107 947,891 947,176 909,162 969,130 956,125',
      '6-12': '807,835 723,881 692,869 635,899 611,890 584,905 478,865 494,856 513,782 543,765',
      '6-13': '807,835 723,881 692,869 635,899 611,890 584,905 478,865 494,856 552,792 566,784 635,810 623,818 623,1229 609,1236 455,1179 485,1162 525,1178 553,1163 514,1148 556,1123 519,1107 734,999 708,989',
      '6-7': '807,835 723,881 692,869 635,899 611,890 584,905 478,865 494,856 552,792 566,784 635,810 623,818 623,1229 609,1236 455,1179 485,1162 525,1178 553,1163 514,1148 556,1123 519,1107 947,891 947,176 994,151 1273,251 1139,324 1116,352 1134,359 1220,314 1243,322 1224,333 1250,344 1250,567 1130,633 1204,661',
      '6-8': '807,835 723,881 692,869 635,899 611,890 584,905 478,865 494,856 552,792 566,784 635,810 623,818 623,1229 609,1236 455,1179 485,1162 525,1178 553,1163 514,1148 556,1123 519,1107 947,891 947,176 911,161 968,130 950,124 920,139 847,113 802,137 794,134 794,112 707,157 796,190 775,201 820,217 820,437 790,453 771,446 699,486',
      '6-9': '807,835 723,881 692,869 635,899 611,890 584,905 478,865 494,856 552,792 566,784 635,810 623,818 623,1229 609,1236 455,1179 485,1162 525,1178 553,1163 514,1148 536,1136 661,1183',
      '7-10': '1204,661 1130,633 1035,681 1015,683 1008,744',
      '7-11': '1204,661 1130,633 1250,567 1250,344 1224,333 1243,322 1220,314 1134,359 1116,352 1139,324 1273,251 994,151 947,176 911,161 968,130 956,125',
      '7-12': '1204,661 1130,633 1250,567 1250,344 1224,333 1243,322 1220,314 1134,359 1116,352 1139,324 1273,251 994,151 947,176 947,891 519,1107 556,1123 514,1148 553,1163 525,1178 485,1162 455,1179 609,1236 623,1229 623,818 635,810 567,783 545,794 513,782 543,765',
      '7-13': '1204,661 1130,633 1250,567 1250,344 1224,333 1243,322 1220,314 1134,359 1116,352 1139,324 1273,251 994,151 947,176 947,891 734,999 708,989',
      '7-8': '1204,661 1130,633 1250,567 1250,344 1224,333 1243,322 1220,314 1134,359 1116,352 1139,324 1273,251 994,151 947,176 911,161 968,130 950,124 920,139 847,113 802,137 794,134 794,112 707,157 796,190 775,201 820,217 820,437 790,453 771,446 699,486',
      '7-9': '1204,661 1130,633 1250,567 1250,344 1224,333 1243,322 1220,314 1134,359 1116,352 1139,324 1273,251 994,151 947,176 947,891 519,1107 560,1124 536,1136 661,1183',
      '8-10': '699,486 771,446 790,453 820,437 820,217 775,201 796,190 707,157 794,112 794,134 802,137 847,113 920,139 950,124 968,130 911,161 947,176 994,151 1273,251 1139,324 1116,352 1134,359 1220,314 1243,322 1224,333 1250,344 1250,567 1035,681 1015,683 1008,744',
      '8-11': '699,486 771,446 790,453 820,437 820,217 775,201 796,190 707,157 794,112 794,134',
      '8-12': '699,486 771,446 790,453 820,437 820,217 775,201 796,190 707,157 794,112 794,134 802,137 847,113 920,139 950,124 968,130 911,161 947,176 947,891 519,1107 556,1123 514,1148 553,1163 525,1178 485,1162 455,1179 609,1236 623,1229 623,818 635,810 567,783 545,794 513,782 543,765',
      '8-13': '699,486 771,446 790,453 820,437 820,217 775,201 796,190 707,157 794,112 794,134 802,137 847,113 920,139 950,124 968,130 911,161 947,176 947,891 734,999 708,989',
      '8-9': '699,486 771,446 790,453 820,437 820,217 775,201 796,190 707,157 794,112 794,134 802,137 847,113 920,139 950,124 968,130 911,161 947,176 947,891 519,1107 560,1124 536,1136 661,1183',
      '9-10': '661,1183 536,1136 560,1124 519,1107 947,891 947,176 994,151 1273,251 1139,324 1116,352 1134,359 1220,314 1243,322 1224,333 1250,344 1250,567 1035,681 1015,683 1008,744',
      '9-11': '661,1183 536,1136 560,1124 519,1107 947,891 947,176 911,161 968,130 956,125',
      '9-12': '661,1183 536,1136 514,1148 553,1163 525,1178 485,1162 455,1179 609,1236 623,1229 623,818 635,810 567,783 545,794 513,782 543,765',
      '9-13': '661,1183 536,1136 556,1123 519,1107 734,999 708,989',
    }

    const vm = new Vue({ // eslint-disable-line
      el: '#app',
      data: {
        startPid: 0,
        endPid: 0,
        places: [
          '入口 / Entrance (PIPE)',
          '聖杯關 / 王座 / Throne Room',
          '雙刀關 / 夾擊大道 / 鐵拳 / Gauntlet',
          '狗關 / 歡愉花園 / Pleasure Gardens',
          '太陽關 / 皇家浴池 / Royal Pools',
          '運水道鑰匙 / 溝渠鑰匙 / Aqueduct',
          '軍械庫鑰匙 / Armory',
          '導水管鑰匙 / 通道鑰匙 / Conduit',
          '排水鑰匙 / Drain',
          '引擎鑰匙 / Engine',
          '灌溉鑰匙 / 水利設備鑰匙 / Irrigation',
          '管道鑰匙 / Pipeline',
          '轉運點鑰匙 / 傳送裝置鑰匙 / Transfer',
          '通風管道鑰匙 / 風扇鑰匙 / Ventilator',
        ],
      },
      computed: {
        points () {
          const start = _.parseInt(this.startPid)
          const end = _.parseInt(this.endPid)
          const key = start < end ? `${start}-${end}` : `${end}-${start}`
          console.log(key)
          return _.get(EDGES, key, '')
        },
      },
      methods: {
        swapStartEnd () {
          const tmp = this.startPid
          this.startPid = this.endPid
          this.endPid = tmp
        },
      },
    })